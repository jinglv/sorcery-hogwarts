{"remainingRequest":"/Users/lvjing/web-project/sorcery-hogwarts/sorcery-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lvjing/web-project/sorcery-hogwarts/sorcery-front/src/components/project/Jenkins.vue?vue&type=style&index=0&id=4dba0480&scoped=true&lang=css&","dependencies":[{"path":"/Users/lvjing/web-project/sorcery-hogwarts/sorcery-front/src/components/project/Jenkins.vue","mtime":1663815307776},{"path":"/Users/lvjing/web-project/sorcery-hogwarts/sorcery-front/node_modules/css-loader/dist/cjs.js","mtime":1663752625181},{"path":"/Users/lvjing/web-project/sorcery-hogwarts/sorcery-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1663752598650},{"path":"/Users/lvjing/web-project/sorcery-hogwarts/sorcery-front/node_modules/postcss-loader/src/index.js","mtime":1663752611807},{"path":"/Users/lvjing/web-project/sorcery-hogwarts/sorcery-front/node_modules/cache-loader/dist/cjs.js","mtime":1663752628994},{"path":"/Users/lvjing/web-project/sorcery-hogwarts/sorcery-front/node_modules/vue-loader/lib/index.js","mtime":1663752598514}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJ0biB7CiAgbWFyZ2luOiAxMHB4Owp9Cgouc21hbGxCdG4gewogIG1hcmdpbjogM3B4Owp9Cg=="},{"version":3,"sources":["Jenkins.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4PA;AACA;AACA;;AAEA;AACA;AACA","file":"Jenkins.vue","sourceRoot":"src/components/project","sourcesContent":["<template>\n  <div>\n    <v-btn color=\"success\" class=\"btn\" @click=\"addDialog=true\">添加Jenkins</v-btn>\n    <!--添加Jenkins-->\n    <v-dialog v-model=\"addDialog\" width=\"500px\">\n      <v-card>\n        <v-card-title>添加Jenkins</v-card-title>\n        <v-card-text>\n          <v-text-field v-model=\"jenkinsName\" label=\"Jenkins名称\"></v-text-field>\n          <v-text-field v-model=\"jenkinsURL\" label=\"Jenkins基础地址\"></v-text-field>\n          <v-text-field v-model=\"jenkinsUsername\" label=\"Jenkins认证登录用户名\"></v-text-field>\n          <v-text-field v-model=\"jenkinsPassword\" type=\"password\" label=\"Jenkins认证登录密码\"></v-text-field>\n          <v-text-field v-model=\"jenkinsCommand\" label=\"Jenkins执行命令\"></v-text-field>\n          <v-select v-model=\"commandRunCaseType \" :items=\"runType\" label=\"测试用例类型\"></v-select>\n          <v-text-field v-model=\"commandRunCaseSuffix \" label=\"测试用例后缀名\"></v-text-field>\n          <v-text-field v-model=\"remark\" label=\"备注\"></v-text-field>\n          <v-checkbox v-model=\"defaultJenkinsFlag\" label=\"是否默认为指定Jenkins\"></v-checkbox>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" text @click=\"addDialog=false\">取消</v-btn>\n          <v-btn color=\"primary\" @click=\"saveJenkins()\">保存</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!--Jenkins信息列表-->\n    <template>\n      <v-data-table\n          :headers=\"headers\"\n          :items=\"desserts\"\n          class=\"elevation-1\"\n          hide-default-footer\n      >\n        <template v-slot:item.commandRunCaseType=\"{item}\">\n          <div v-if=\"item.commandRunCaseType===1\">文本</div>\n          <div v-if=\"item.commandRunCaseType===2\">文件</div>\n        </template>\n        <template v-slot:item.action=\"{item}\">\n          <v-btn color=\"success\" small @click=\"editJenkins(item)\" class=\"smallBtn\">编辑</v-btn>\n          <v-btn color=\"error\" small @click=\"deleteJenkins(item)\" class=\"smallBtn\">删除</v-btn>\n        </template>\n        <template v-slot:item.defaultJenkinsFlag=\"{item}\">\n          <div v-if=\"item.defaultJenkinsFlag===1\">是</div>\n          <div v-if=\"item.defaultJenkinsFlag===0\">否</div>\n        </template>\n      </v-data-table>\n    </template>\n\n    <!--编辑Jenkins-->\n    <v-dialog v-model=\"editDialog\" width=\"500px\">\n      <v-card>\n        <v-card-title>编辑Jenkins</v-card-title>\n        <v-card-text>\n          <v-text-field v-model=\"jenkinsName\" label=\"Jenkins名称\"></v-text-field>\n          <v-text-field v-model=\"jenkinsURL\" label=\"Jenkins基础地址\"></v-text-field>\n          <v-text-field v-model=\"jenkinsUsername\" label=\"Jenkins认证登录用户名\"></v-text-field>\n          <v-text-field v-model=\"jenkinsPassword\" type=\"password\" label=\"Jenkins认证登录密码\"></v-text-field>\n          <v-text-field v-model=\"jenkinsCommand\" label=\"Jenkins执行命令\"></v-text-field>\n          <v-select v-model=\"commandRunCaseType \" :items=\"runType\" label=\"测试用例类型\"></v-select>\n          <v-text-field v-model=\"commandRunCaseSuffix \" label=\"测试用例后缀名\"></v-text-field>\n          <v-text-field v-model=\"remark\" label=\"备注\"></v-text-field>\n          <v-checkbox v-model=\"defaultJenkinsFlag\" label=\"是否默认为指定Jenkins\"></v-checkbox>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" text @click=\"editDialog=false\">取消</v-btn>\n          <v-btn color=\"primary\" @click=\"saveEditJenkins()\">保存</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <!--分页显示处理-->\n    <v-pagination v-if=\"pageLength>0\" v-model=\"currentPage\" :length=\"pageLength\" @input=\"getJenkinsList()\"\n                  total-visible=\"7\"></v-pagination>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      addDialog: false,\n      jenkinsName: '',\n      jenkinsURL: '',\n      jenkinsUsername: '',\n      jenkinsPassword: '',\n      jenkinsCommand: '',\n      commandRunCaseType: '',\n      runType: [\n        {text: '文本', value: 1},\n        {text: '文件', value: 2}\n      ],\n      commandRunCaseSuffix: '',\n      remark: '',\n      defaultJenkinsFlag: '',\n      headers: [\n        {text: 'ID', value: 'id'},\n        {text: 'Jenkins名称', value: 'name'},\n        {text: 'Jenkins地址', value: 'url'},\n        {text: 'Jenkins测试命令', value: 'command'},\n        {text: '测试用例类型', value: 'commandRunCaseType'},\n        {text: '测试配置文件后缀', value: 'commandRunCaseSuffix'},\n        {text: '是否为默认', value: 'defaultJenkinsFlag'},\n        {text: '操作', value: 'action'},\n      ],\n      desserts: [],\n      editDialog: false,\n      currentPage: 1,\n      pageLength: 0\n    }\n  },\n  created() {\n    this.getJenkinsList()\n  },\n  methods: {\n    // 添加Jenkins\n    saveJenkins() {\n      let params = {\n        commandRunCaseType: this.commandRunCaseType,\n        commandRunCaseSuffix: this.commandRunCaseSuffix,\n        name: this.jenkinsName,\n        jenkinsPassword: this.jenkinsPassword,\n        jenkinsUsername: this.jenkinsUsername,\n        remark: this.remark,\n        command: this.jenkinsCommand,\n        url: this.jenkinsURL,\n        defaultJenkinsFlag: this.defaultJenkinsFlag ? 1 : 0\n      }\n      this.$api.jenkins.addJenkins(params).then(res => {\n        if (res.data.resultCode === 1) {\n          if (this.instanceNotify) {\n            this.instanceNotify.close()\n          }\n          this.instanceNotify = this.$notify({\n            title: '成功',\n            message: '添加成功',\n            type: 'success'\n          })\n          this.getJenkinsList()\n          this.addDialog = false\n        } else {\n          if (this.notifyInstance) {\n            this.notifyInstance.close()\n          }\n          this.notifyInstance = this.$notify({\n            title: '错误',\n            message: res.data.message,\n            type: 'error'\n          })\n        }\n      })\n    },\n    // 编辑Jenkins\n    editJenkins(item) {\n      this.editId = item.id\n      this.jenkinsName = item.name\n      this.jenkinsCommand = item.command\n      this.jenkinsURL = item.url\n      this.jenkinsUsername = item.jenkinsUsername\n      this.jenkinsPassword = item.jenkinsPassword\n      this.remark = item.remark\n      this.commandRunCaseType = item.commandRunCaseType\n      this.commandRunCaseSuffix = item.commandRunCaseSuffix\n      this.editDialog = true\n    },\n    // 保存编辑Jenkins\n    saveEditJenkins() {\n      let params = {\n        id: this.editId,\n        name: this.jenkinsName,\n        commandRunCaseType: this.commandRunCaseType,\n        commandRunCaseSuffix: this.commandRunCaseSuffix,\n        jenkinsUsername: this.jenkinsUsername,\n        jenkinsPassword: this.jenkinsPassword,\n        remark: this.remark,\n        command: this.jenkinsCommand,\n        url: this.jenkinsURL,\n        defaultJenkinsFlag: this.defaultJenkinsFlag ? 1 : 0\n      }\n      this.$api.jenkins.editJenkins(params).then(res => {\n        // 调用接口，返回resultCode=1，说明接口调用成功\n        if (res.data.resultCode === 1) {\n          if (this.instanceNotify) {\n            this.instanceNotify.close()\n          }\n          this.instanceNotify = this.$notify({\n            title: '成功',\n            message: '编辑成功',\n            type: 'success'\n          })\n          this.getJenkinsList()\n          this.editDialog = false\n        } else {\n          if (this.notifyInstance) {\n            this.notifyInstance.close()\n          }\n          this.notifyInstance = this.$notify({\n            title: '错误',\n            message: res.data.message,\n            type: 'error'\n          })\n        }\n      })\n    },\n    // 删除Jenkins\n    deleteJenkins(item) {\n      let params = {\n        id: item.id\n      }\n      this.$api.task.deleteJenkins(params).then(res => {\n        if (res.data.resultCode === 1) {\n          if (this.instanceNotify) {\n            this.instanceNotify.close()\n          }\n          this.instanceNotify = this.$notify({\n            title: '成功',\n            message: '删除成功',\n            type: 'success'\n          })\n          this.getJenkinsList()\n        } else {\n          if (this.notifyInstance) {\n            this.notifyInstance.close()\n          }\n          this.notifyInstance = this.$notify({\n            title: '错误',\n            message: res.data.message,\n            type: 'error'\n          })\n        }\n      })\n    },\n    // 分页查询Jenkins列表\n    getJenkinsList() {\n      let params = {\n        pageNum: this.currentPage,\n        pageSize: 5,\n      }\n      this.$api.jenkins.getJenkinsList(params).then(res => {\n        // 调用接口，返回resultCode=1，说明接口调用成功\n        if (res.data.resultCode === 1) {\n          this.desserts = res.data.data.data\n          this.rows = res.data.data.recordsTotal\n          // 每5条为一页\n          this.pageLength = Math.ceil(this.rows / 5)\n        }\n      })\n    },\n  }\n}\n</script>\n<style scoped>\n.btn {\n  margin: 10px;\n}\n\n.smallBtn {\n  margin: 3px;\n}\n</style>\n"]}]}